@{
    Layout = null;
}

<!-- scripts and style sheets-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="~/lib/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/1.10.15/css/dataTables.bootstrap.min.css" rel="stylesheet" />
<link href="https://cdn.datatables.net/responsive/2.1.1/css/responsive.bootstrap.min.css" rel="stylesheet" />
<script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap4.min.js "></script>

<div class="table-div">
    <br />
    <div style="width:90%; margin:0 auto;">
        <table id="prova" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
            <thead>
                <tr>
                    <th>MaterialID</th>
                    <th>Name</th>
                    <th>Description</th>
                    <th>imgUrl</th>
                </tr>
            </thead>
        </table>
    </div>
</div>
<div id="view-image" class="view-image"></div>


@*Loading Datatables to the page*@
<link href="~/css/material.css" rel="stylesheet" />
<link href="~/datatables/datatables.css" rel="stylesheet" />


<script>
   
$(document).ready(function ()
{
    const diva = document.getElementById("view-image");
    const img = document.createElement("IMG");


    function showImage(url, target) {
        img.src = url
        target.appendChild(img);
        target.autoWidth;
    }


    var table = $('#prova').DataTable({
        "processing": true, // for show progress bar
        "serverSide": true, // for process server side
        "filter": true, // this is for disable filter (search box)
        "orderMulti": false, // for disable multiple column at once
        "ajax": {
            "url": "Material/LoadData",
            "type": "POST",
            "datatype": "json"
        },
        "columns": [

            { "data": "materialID", "name": "materialID", "autoWidth": true },
            { "data": "name", "name": "name", "autoWidth": true },
            { "data": "description", "name": "description", "autoWidth": true },
            { "data": "imgUrl", "autoWidth": true }

        ]

    });



    $('#prova tbody').on('click', 'tr', function () {

        var riga = table.row(this).data();
        showImage(riga.imgUrl, diva);

    });

});

</script>



